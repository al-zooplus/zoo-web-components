{"version":3,"file":"modal.js","sources":["../../src/zoo-modules/misc-modules/modal-module/modal.js"],"sourcesContent":["/**\n * @injectHTML\n */\nexport class Modal extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.header = this.shadowRoot.querySelector('span');\n\t}\n\n\t// todo remove in v9 headertext\n\tstatic get observedAttributes() {\n\t\treturn ['headertext', 'closelabel'];\n\t}\n\n\tattributeChangedCallback(attrName, oldVal, newVal) {\n\t\tif (attrName == 'headertext') this.handleText(newVal);\n\t\tif (attrName == 'closelabel') this.handleCloseLabel(newVal);\n\t}\n\thandleText(newVal) {\n\t\tthis.header.innerHTML = newVal;\n\t}\n\thandleCloseLabel(newVal) {\n\t\tconst closeButton = this.shadowRoot.querySelector('.close');\n\t\tcloseButton.setAttribute('aria-label', newVal);\n\t}\n\tconnectedCallback() {\n\t\tthis.hidden = true;\n\t\tthis.shadowRoot.querySelector('.close').addEventListener('click', () => this.closeModal());\n\t\tconst box = this.shadowRoot.querySelector('.box');\n\t\tbox.addEventListener('click', e => {\n\t\t\tif (e.target == box) this.closeModal();\n\t\t});\n\t}\n\topenModal() {\n\t\tthis.style.display = 'block';\n\t\tthis.toggleModalClass();\n\t\t// todo trap focus inside modal\n\t\tthis.shadowRoot.querySelector('button').focus();\n\t\tdocument.addEventListener('keyup', e => {\n\t\t\tif (e.key === 'Escape') this.closeModal();\n\t\t});\n\t}\n\n\tcloseModal() {\n\t\tif (this.timeoutVar) return;\n\t\tthis.hidden = !this.hidden;\n\t\tthis.toggleModalClass();\n\t\tthis.timeoutVar = setTimeout(() => {\n\t\t\tthis.style.display = 'none';\n\t\t\tthis.dispatchEvent(new Event('modalClosed'));\n\t\t\tthis.hidden = !this.hidden;\n\t\t\tthis.timeoutVar = undefined;\n\t\t}, 300);\n\t}\n\n\ttoggleModalClass() {\n\t\tconst modalBox = this.shadowRoot.querySelector('.box');\n\t\tif (!this.hidden) {\n\t\t\tmodalBox.classList.add('hide');\n\t\t\tmodalBox.classList.remove('show');\n\t\t} else {\n\t\t\tmodalBox.classList.add('show');\n\t\t\tmodalBox.classList.remove('hide');\n\t\t}\n\t}\n}\n\nwindow.customElements.define('zoo-modal', Modal);"],"names":[],"mappings":"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"}