<div class="checkbox-box {_clicked ? 'clicked':''} {highlighted ? 'highlighted':''}" class:error="!valid" class:disabled="disabled">
	<label class="input-slot" on:click="handleClick(event)">
		<slot name="checkboxelement" on:click="handleSlotClick(event)"></slot>
		<span class="input-label">
			{#if labeltext}
				{labeltext}
			{/if}
		</span>
	</label>
</div>

<style type='text/scss'>
	@import "variables";
	.checkbox-box {
	  width: 100%;
	  display: flex;
	  position: relative;
	  box-sizing: border-box;
	  cursor: pointer;
	  &.highlighted {
		border: 2px solid;
		border-color: $whisper;
		border-radius: 3px;
		padding: 13px 15px;
	  }
	  &.clicked {
		border-color: $main-color;
	  }
	  &.error {
		border-color: $error-text-color;
		.input-slot {
			.input-label {
				color: $error-text-color;
			}
		}
	  }
	  &.disabled {
		  cursor: not-allowed;
		  .input-slot {
			cursor: not-allowed;
			.input-label {
				color: $grey-chateau;
			}
		}
	  }
	  .input-slot {
	    width: 100%;
	    display: flex;
		flex-direction: row;
		cursor: pointer;
		.input-label {
			display: flex;
    		align-items: center;
			position: relative;
    		left: 5px;
		}
	  }
	}
	::slotted(input[type="checkbox"]) {
	  position: relative;
	  margin: 0;
	  -webkit-appearance: none;
	  -moz-appearance: none;
	  outline: none;
	  cursor: pointer;
	}
	//https://wiki.mozilla.org/Release_Management/Calendar
	//::slotted::after will be supported in Firefox 65
	::slotted(input[type="checkbox"])::before {
	  position: relative;
	  display: inline-block;
	  width: 16px;
	  height: 16px;
	  content: "";
	  border-radius: 3px;
	  border: 2px solid #3c9700;
	  background: white;
	}
	::slotted(input[type="checkbox"]:checked)::before {
	  background: $main-color;
	}
	::slotted(input[type="checkbox"]:checked)::after {
	  content: "";
	  position: absolute;
	  top: 3px;
	  left: 7px;
	  width: 4px;
	  height: 8px;
	  border-bottom: 2px solid;
	  border-right: 2px solid;
	  transform: rotate(40deg);
	  color: white;
	}

	::slotted(input[type="checkbox"]:disabled) {
	  cursor: not-allowed;
	}
	::slotted(input[type="checkbox"]:disabled)::before {
	  border-color: $grey;
	  background-color: $whisper;
	}
	::slotted(input[type="checkbox"].error)::before {
	  border: 2px solid;
	  border-color: $error-text-color;
	}
</style>

<script>
	export default {
	  tag: "zoo-log-checkbox",
	  data() {
	    return {
	      labeltext: "",
	      valid: true,
		  disabled: false,
		  highlighted: false,
		  _clicked: false
	    };
	  },
	  methods: {
		  handleClick(event) {
			  if (this.disabled) {
				  event.stopPropagation();
				  event.preventDefault();
				  return;
			  }
			  event.stopImmediatePropagation();
			  const inputEl = this.shadowRoot.querySelector('slot').assignedNodes()[0];
			  this._clicked = !this._clicked;
			  inputEl.click();
		  },
		  handleSlotClick(event) {
			  if (this.disabled) {
				  event.stopPropagation();
				  event.preventDefault();
				  return;
			  };
			  event.stopImmediatePropagation();
		  }
	  }
	};
</script>